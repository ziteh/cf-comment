<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>作者標章功能測試</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }
        h2 {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>Wonton Comment 作者標章功能測試</h1>

    <div class="test-section">
        <h2>測試 1: 啟用作者標章 (authorName 設定)</h2>
        <div id="comments1"></div>
    </div>

    <div class="test-section">
        <h2>測試 2: 未設定作者名稱</h2>
        <div id="comments2"></div>
    </div>

    <script src="./client/dist/wonton-comment.umd.js"></script>
    <script>
        // 模擬評論資料，包含管理員評論
        const mockComments = [
            {
                id: '1',
                content: '這是一般用戶的評論',
                pseudonym: 'User123',
                createdAt: new Date().toISOString(),
                isAdmin: false,
                isMyComment: false
            },
            {
                id: '2',
                content: '這是管理員的評論，應該顯示作者標章',
                pseudonym: 'AdminUser',
                createdAt: new Date().toISOString(),
                isAdmin: true,
                isMyComment: false
            },
            {
                id: '3',
                content: '這是我的評論',
                pseudonym: 'MyPseudonym',
                createdAt: new Date().toISOString(),
                isAdmin: false,
                isMyComment: true
            },
            {
                id: '4',
                content: '這是管理員且是我的評論，應該顯示作者標章而不是"我"標章',
                pseudonym: 'AdminMe',
                createdAt: new Date().toISOString(),
                isAdmin: true,
                isMyComment: true
            }
        ];

        // 模擬 API 回應
        function mockFetch(url, options) {
            return Promise.resolve({
                ok: true,
                json: () => Promise.resolve({
                    comments: mockComments,
                    total: mockComments.length
                })
            });
        }

        // 替換全域 fetch 函數
        window.fetch = mockFetch;        // 測試 1: 設定作者名稱
        WontonComment.default({
            el: '#comments1',
            serverUrl: 'https://fake-server.com',
            pageId: 'test-page-1',
            authorName: '部落格作者' // 設定作者名稱
        });

        // 測試 2: 未設定作者名稱
        WontonComment.default({
            el: '#comments2',
            serverUrl: 'https://fake-server.com',
            pageId: 'test-page-2'
            // 未設定 authorName
        });
    </script>
</body>
</html>
